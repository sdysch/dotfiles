# common aliases

# === ls ===
# exa over ls
if type eza > /dev/null 2>&1; then
	alias ls="eza --icons=always"
	alias ll="eza -l --sort newest --color=always --icons=always"
else
	alias ls="ls --color=auto"
	alias ll="ls -ltrh"
fi

# === grep ===
alias grep='grep --color=auto -n'

# === human readable memory by default ===
alias du="du -h"
alias df="df -h"

# being careful about what I move and delete
alias rm="rm -i"
alias mv="mv -i"

# get weather
alias weather="curl -sL \"http://wttr.in//?format=%c%t\" | sed -e 's/+//' -e 's/\ //'"

# === python ===
# uv
alias uva="uv add"
alias uvi="uv init"
alias uvinw="uv init --no-workspace"
alias uvl="uv lock"
alias uvp="uv pip"
alias uvr="uv run"
alias uvrdb="uv run --with pdbpp"
alias uvrm="uv remove"
alias uvs="uv sync"
alias uvv="uv venv"

# conda cleanup
function conda_clean() {
	conda clean --tarballs --index-cache --yes
	conda clean --all --yes
}

# dotfile management
alias dotfiles="cd $HOME/dotfiles"
alias dots="cd $HOME/dotfiles"

# === git aliases ===
alias g="git"
alias ga="git add"
alias gaa="git add --all"
alias gb="git branch"
alias gba="git branch -a"
alias gc="git commit -v"
alias gch="git checkout"
alias gd="git diff"
alias gst="git status"
alias gp="git push"
alias gs="git switch"
alias gsp="git stash pop"
alias gf="git fetch"
alias gca="git commit --amend"
alias gpu="git pull"
alias gwt="git worktree add"
alias gwtb="git worktree add -b"
alias gwtl="git worktree list"
alias gwtr="git worktree remove"
alias gwtp="git worktree prune"

alias lg="lazygit"

# === vim ===
# alias vim to nvim
if [[ "$EDITOR" == "/usr/bin/nvim" ]] || [[ "$EDITOR" == "nvim" ]]
then
	alias vim="nvim"
	alias vimdiff="nvim -d"
fi
alias v="vim"
alias n="nvim"
alias nv="nvim"

# === opencode ===
alias oc="opencode"

# === tmux ===
alias tmux="tmux -f $HOME/.config/tmux/tmux.conf"
alias t="tmux"
alias ta='tmux attach-session -t'
alias tn='tmux new-session -s'
alias tnd='tmux new-session -s -d'
alias tls='tmux list-sessions'
alias tk='tmux kill-session -t'
alias ts='tmux switch-client -t' 

# fzf sessions and attach
tas() {
	session=$(tmux ls 2>/dev/null | cut -d: -f1 | FZF_DEFAULT_OPTS= fzf --height 60% --prompt="-> " --header="tmux sessions " --header-first --border=rounded --padding=1 --layout=reverse --info=inline)
	if [ -n "$session" ]; then
		tmux attach-session -t "$session"
	fi
}

# === newsboat ===
alias nb="newsboat"

# === btop ===
# pick colours from tty
alias btop="btop --tty"

# === vimwiki ===
export VIMWIKI=$HOME/Documents/vimwiki
alias wiki="vim $VIMWIKI/index.md"
alias wikitodo="vim $VIMWIKI/todo.md"
alias wikinotes="vim $VIMWIKI/notes.md"
alias notes="wikinotes"
# find wikis
function wif() {
	file=$(find $VIMWIKI/**.md -type f | fzf)
	vim $file
}
# search wiki
function wis() {
  rg --line-number --color=always "$1" $VIMWIKI \
    | FZF_DEFAULT_OPTS= fzf --ansi --delimiter : --nth 3.. \
          --preview 'bat --style=plain --color=always --line-range :50 {1}' \
          --preview-window=up:50% \
    | awk -F: '{print "+"$2, $1}' \
    | xargs -r nvim
}
# find todos
function wit() {
  rg --line-number "\[ \]" "$VIMWIKI" \
  | FZF_DEFAULT_OPTS= fzf --delimiter : \
        --nth 3.. \
        --preview 'bat --style=plain --color=always --line-range :50 {1}' \
        --preview-window=up:50% \
  | awk -F: '{print "+"$2, $1}' \
  | xargs nvim
}

# print out how many (top-level) todo items I have left
alias todoLeft="grep -c \"\[ \]\" ~/Documents/vimwiki/todo.md"

# === kittens ===
alias kplot="kitty +kitten icat"
