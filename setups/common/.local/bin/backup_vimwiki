#!/bin/sh
# automatically backup vimwiki

set -eu

#!/bin/sh
echo "backup_vimwiki ran at $(date)" >> /tmp/backup_vimwiki.log

[ -d "$VIMWIKI" ] || exit 0

timestamp=$(date -I)
message="Vimwiki auto-backup @ $timestamp"

git -C "$VIMWIKI" add -A
git -C "$VIMWIKI" commit -m "$message" > /dev/null
git -C "$VIMWIKI" push > /dev/null

notify_info "Vimwiki" "$message"
