#!/bin/sh
export HYPRLAND_INSTANCE_SIGNATURE=$(cat ~/.cache/hyprland_sig)

WALLPAPERS_DIR="$HOME/dotfiles/wallpapers"
WALLPAPERS=("$WALLPAPERS_DIR"/*)


# Pick one at random
RANDOM_WALLPAPER="${WALLPAPERS[RANDOM % ${#WALLPAPERS[@]}]}"

# preload
hyprctl hyprpaper preload "$RANDOM_WALLPAPER"

echo $RANDOM_WALLPAPER >> /tmp/hyprpaper_wallpaper

# Apply to all connected monitors
for MON in $(/usr/bin/hyprctl monitors -j | jq -r '.[].name'); do
    /usr/bin/hyprctl hyprpaper wallpaper "$MON,$RANDOM_WALLPAPER"
done
