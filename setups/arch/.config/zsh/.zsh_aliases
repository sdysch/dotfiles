# personal aliases

# source common aliases
source $ZDOTDIR/.zsh_aliases_common

# opening files
open() {
	xdg-open $@ 2>/dev/null & 
}

# gnu pass
alias pgp="pass git push origin master"

# pacman
alias p="sudo pacman"

# mounting storage drive, I always forget this. # TODO check location in function
alias mount_seagate="sudo mount -t ntfs-3g /dev/sda1 /mnt"

# count songs in mpd database
function number_of_songs() {
	if command -v mpc >/dev/null; then
			mpc update >/dev/null 2>&1
			mpc stats | awk -F': ' '/Songs:/ {print $2}'
		else
			echo "mpc not found"
	fi
}

# check music metadata in a directory
function check_music_metadata() {
	shopt -s nullglob
	for f in "$@"; do
		echo "File: $f"
		ffprobe -v error \
		  -show_entries format_tags=title,album,artist \
		  -of default=noprint_wrappers=1:nokey=0 "$f"
		echo
	done
}

# music
function ytmp3() {
	yt-dlp -o '%(playlist_index)s - %(title)s.%(ext)s' \
       --extract-audio \
       --audio-format mp3 \
       --add-metadata \
       --embed-thumbnail \
       --metadata-from-title "%(artist)s - %(title)s" \
       --split-chapters \
       $1
}

function spotmp3() {
	spotdl --lyrics --output "./{artist}/{album}/" --overwrite skip --print-errors --audio youtube youtube-music --no-cache $1
}

function update_pacman_mirrors() {
	sudo reflector --latest 10 --sort rate --save /etc/pacman.d/mirrorlist
}
